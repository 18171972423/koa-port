{"version":3,"sources":["../../src/config/db.js"],"names":["connect","server","auto_reconnect","Promise","global","set","db","connection","once","console","log","on","error","disconnect"],"mappings":"uCAAA,oC;;AAEA,mBAASA,OAAT,CAAiB,yBAAjB,EAA2C,EAACC,QAAQ,EAACC,gBAAe,IAAhB,EAAT,EAA3C;;AAEA,mBAASC,OAAT,GAAiBC,OAAOD,OAAxB;AACA,mBAASE,GAAT,CAAa,OAAb,EAAqB,IAArB;;AAEA,IAAMC,KAAK,mBAASC,UAApB;;AAEAD,GAAGE,IAAH,CAAQ,MAAR,EAAgB,YAAM;AAClBC,YAAQC,GAAR,CAAY,MAAZ;AACH,CAFD;;AAIAJ,GAAGK,EAAH,CAAM,OAAN,EAAc,UAACC,KAAD,EAAW;AACrBH,YAAQG,KAAR,CAAc,kCAAkCA,KAAhD;AACA,uBAASC,UAAT;AACH,CAHD;;;AAMAP,GAAGK,EAAH,CAAM,OAAN,EAAe,YAAM;AACjBF,YAAQC,GAAR,CAAY,eAAZ;AACA,uBAASV,OAAT,CAAiB,yBAAjB,EAA2C,EAACC,QAAQ,EAACC,gBAAe,IAAhB,EAAT,EAA3C;AACH,CAHD,E;;;AAMeI,E","file":"db.js","sourcesContent":["import mongoose from 'mongoose';\n\nmongoose.connect('mongodb://127.0.0.1/koa',{server: {auto_reconnect:true}});\n\nmongoose.Promise=global.Promise;\nmongoose.set('debug',true);\n\nconst db = mongoose.connection;\n\ndb.once('open', () => {\n    console.log('连接成功')\n})\n\ndb.on('error',(error) => {\n    console.error('Error in MongoDb connection: ' + error);\n    mongoose.disconnect();\n});\n\n\ndb.on('close', () => {\n    console.log('数据库断开，重新连接数据库');\n    mongoose.connect('mongodb://127.0.0.1/koa',{server: {auto_reconnect:true}});\n});\n\n\nexport default db;"]}