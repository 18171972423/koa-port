{"version":3,"sources":["../../src/controllers/index.js"],"names":[],"mappings":"gtBAAA,2C;AACA,0C;AACA;AACA,4B;;AAEM,U;AACF,0BAAa;AACT,yBADS;AAET,cAAK,UAAL,GAAkB,MAAK,UAAL,CAAgB,IAAhB,OAAlB;AACA,cAAK,KAAL,GAAa,MAAK,KAAL,CAAW,IAAX,OAAb,CAHS;AAIZ,K;;AAEK,c,uGAAW,G,EAAI,I;;AAEN,kC,GAAU,IAAI,K,CAAd,M;AACY,iDAAW,IAAX,CAAgB,EAAC,cAAD,EAAhB,C,SAAb,I;;AAEH,iCAAK,MAAL,IAAe,C;AACR,kC,GAAS;AACX,8CADW,E;;AAGT,iDAAW,MAAX,CAAkB,MAAlB,C;AACN,gCAAI,IAAJ,GAAW;AACP,sCAAK,GADE;AAEP,yCAAQ,SAFD,EAAX,C;;;AAKA,gCAAI,IAAJ,GAAW;AACP,sCAAK,GADE;AAEP,yCAAQ,SAFD,EAAX,C;;;;;AAOJ,oCAAQ,GAAR,c;;;;AAIF,c,yGAAW,G,EAAI,I;;AAEM,iDAAW,IAAX,CAAgB,IAAI,KAApB,C,SAAb,I;AACN,gCAAG,KAAK,MAAL,GAAc,CAAjB,EAAmB;AACf,oCAAI,IAAJ,GAAW,IAAX;AACH,6BAFD,MAEK;AACD,oCAAI,IAAJ,GAAW;AACP,0CAAK,GADE;AAEP,6CAAQ,OAFD,EAAX;;AAIH,6B;;;AAGD,oCAAQ,GAAR,e;;;;AAIF,a,yGAAU,G,EAAI,I;;AAEW,iDAAW,IAAX,CAAgB,IAAI,KAApB,C,SAAjB,Q;AACH,qCAAS,MAAT,IAAmB,C;AAClB,gCAAI,IAAJ,GAAW;AACH,sCAAK,GADF;AAEH,yCAAQ,MAFL,EAAX,C;;;;AAMe,iDAAW,MAAX,CAAkB,IAAI,KAAtB,EAA4B,UAAC,GAAD,EAAK,IAAL,EAAc;AACzD,wCAAG,GAAH,EAAO;AACH,4CAAI,IAAJ,GAAW;AACP,kDAAK,GADE;AAEP,qDAAQ,IAFD;AAGP,kDAAK,GAHE,EAAX;;AAKA;AACH,qCAPD,MAOK;AACD,gDAAQ,GAAR,CAAY,IAAZ;AACA,4CAAI,IAAJ,GAAW;AACP,kDAAK,GADE;AAEP,qDAAQ,MAFD,EAAX;;AAIH;AACJ,iCAfkB,C,SAAb,I;;AAiBN,oCAAQ,GAAR,e;;;;;;;;;AASG,IAAI,UAAJ,E","file":"index.js","sourcesContent":["import Admin from '../prototype/admin';\nimport adminModel from '../models/iphone';\nimport {uploadFile} from '../config/uploadFile';\nimport path from 'path';\n\nclass SaveIphone extends Admin {\n    constructor(){\n        super()\n        this.saveIphone = this.saveIphone.bind(this)\n        this.login = this.login.bind(this)\n    }\n    \n    async saveIphone(ctx,next){\n        try{\n            const {iphone} = ctx.query;\n            const data = await adminModel.find({iphone});\n                \n            if(data.length == 0){\n                const newTel = {\n                    iphone\n                }\n                await adminModel.create(newTel)\n                ctx.body = {\n                    code:200,\n                    message:'手机号添加成功'\n                };\n            }else{\n                ctx.body = {\n                    code:400,\n                    message:'手机号已添加过'\n                }\n            }\n            \n        }catch(err){\n            console.log(err)\n        }\n        \n    }\n    async callIphone(ctx,next){\n        try{\n            const data = await adminModel.find(ctx.query);\n            if(data.length > 0){\n                ctx.body = data;\n            }else{\n                ctx.body = {\n                    code:400,\n                    message:'无查询数据'\n                }\n            }\n\n        }catch(err){\n            console.log(err)\n        }\n        \n    }\n    async delIphone(ctx,next){\n        try{\n            const findData = await adminModel.find(ctx.query);\n            if(findData.length == 0){\n                ctx.body = {\n                        code:300,\n                        message:'删除失败'\n                    }\n                return;\n            }\n            const data = await adminModel.remove(ctx.query,(err,data) => {\n                if(err){\n                    ctx.body = {\n                        code:400,\n                        message:'异常',\n                        data:err\n                    }\n                    return\n                }else{\n                    console.log(data)\n                    ctx.body = {\n                        code:200,\n                        message:'删除成功'\n                    }\n                }\n            });\n        }catch(error){\n            console.log(error)\n        }\n        \n        \n        \n    }\n}\n\n\nexport default new SaveIphone();\n\n"]}